name : Build succeeds on PR

on : 
  pull_request :
    branches :  
        - main

jobs :
  build :
    runs-on : ubuntu-latest
    env:
      DATABASE_URL: "postgresql://postgres:password@localhost:5432/testdb"     

    steps :
        - uses : actions/checkout@v3
        - name : Use Node.js
          uses : actions/setup-node@v3
          with :
            node-version : '20'

        - name : Install dependencies
          run : npm install

        - name: Generate Prisma Client
          run: npx prisma generate
          working-directory: packages/db
            
        - name : Run build
          run : npm run build